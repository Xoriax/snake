<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>Snake</title>
    <link rel="stylesheet" href="/src/styles/style.css" />
  </head>
  <body>
    <div class="wrap">
      <h1>Snake</h1>

      <!-- ACCUEIL (menu) -->
      <section id="home" class="home">
        <div id="menu" class="menu">
          <div class="row">
            <label for="mode">Mode :</label>
            <select id="mode">
              <option value="classic">Classic</option>
              <option value="time">Time Attack (60s)</option>
              <option value="zen">Zen Wrap</option>
              <option value="hardcore">Hardcore</option>
            </select>
          </div>

          <div class="row">
            <label for="grid">Grille :</label>
            <select id="grid">
              <option value="16">16 × 16</option>
              <option value="20">20 × 20</option>
              <option value="24" selected>24 × 24</option>
            </select>
          </div>

          <div class="row">
            <label class="chk"
              ><input type="checkbox" id="daily-seed" /> Daily Challenge</label
            >
            <label class="chk"
              ><input type="checkbox" id="portals" checked /> Portails</label
            >
            <label class="chk"
              ><input type="checkbox" id="dash" checked /> Dash (F)</label
            >
            <label class="chk"
              ><input type="checkbox" id="particles" checked />
              Particules</label
            >
            <label class="chk"
              ><input type="checkbox" id="shrink" /> Shrinking Arena</label
            >
          </div>

          <div class="row">
            <label class="chk"
              ><input type="checkbox" id="magnet" checked /> Power-up
              Magnet</label
            >
            <label class="chk"
              ><input type="checkbox" id="mirror" checked /> Power-up
              Mirror</label
            >
          </div>

          <div class="row">
            <label for="dash-cd">Cooldown Dash (s) :</label>
            <select id="dash-cd">
              <option value="3">3</option>
              <option value="5" selected>5</option>
              <option value="8">8</option>
            </select>
          </div>

          <!-- Audio controls -->
          <div class="row audio">
            <label class="chk"
              ><input type="checkbox" id="mute" /> 🔇 Mute</label
            >
            <label
              >🔊 Volume
              <input
                type="range"
                id="volume"
                min="0"
                max="1"
                step="0.01"
                value="0.6"
              />
            </label>
          </div>

          <button id="play-btn">▶️ Jouer</button>

          <div class="tips">
            ZQSD · Espace: pause · R: rejouer · M: menu · T: thème · W: wrap ·
            O: obstacles · F: dash
          </div>
        </div>
      </section>

      <!-- SHELL JEU : 3 colonnes -->
      <section id="game-shell" class="game-shell" style="display: none">
        <!-- Colonne gauche : infos de la partie + commandes -->
        <aside class="side left">
          <div class="panel">
            <h3>Partie</h3>
            <div>Mode : <strong id="mode-name">Classic</strong></div>
            <div>Meilleur : <strong id="best">0</strong></div>
            <div>Wrap : <strong id="wrap-flag">OFF</strong></div>
            <div>Obstacles : <strong id="obs-flag">OFF</strong></div>
          </div>

          <div class="panel commands">
            <h3>Commandes</h3>
            <ul>
              <li>ZQSD / Flèches : bouger</li>
              <li>Espace : pause</li>
              <li>R : rejouer</li>
              <li>M : retour accueil</li>
              <li>T : changer thème</li>
              <li>W : wrap ON/OFF</li>
              <li>O : obstacles ON/OFF</li>
              <li>F : dash</li>
            </ul>
            <!-- on garde .help pour compat UI -->
            <p class="help" style="display: none"></p>
          </div>
        </aside>

        <!-- Centre : plateau + postgame -->
        <main class="board">
          <canvas
            id="game"
            width="512"
            height="512"
            aria-label="Jeu Snake"
          ></canvas>

          <div id="postgame" class="postgame" style="display: none">
            <button id="replay-btn">↻ Rejouer</button>
            <button id="home-btn">🏠 Accueil</button>
          </div>
        </main>

        <!-- Colonne droite : HUD live -->
        <aside class="side right">
          <div class="panel hud" style="display: flex">
            <div>Score : <span id="score">0</span></div>
            <div>Vitesse : <span id="speed">1.0x</span></div>
            <div>Combo : <span id="combo">x1</span></div>
            <div id="timer-box" style="display: none">
              ⏱️ <span id="timer">60.0</span>s
            </div>
            <div id="dash-box" style="display: none">
              ⚡ Dash: <span id="dash-ready">OK</span>
            </div>
          </div>

          <div class="panel badges" style="display: flex">
            <span id="badge-slow" class="badge" style="display: none"
              >⏳ Slow</span
            >
            <span id="badge-ghost" class="badge" style="display: none"
              >👻 Ghost</span
            >
            <span id="badge-x2" class="badge" style="display: none"
              >✖️2 Score</span
            >
            <span id="badge-portals" class="badge" style="display: none"
              >🌀 Portails</span
            >
            <span id="badge-mirror" class="badge" style="display: none"
              >⇄ Mirror</span
            >
            <span id="badge-magnet" class="badge" style="display: none"
              >🧲 Magnet</span
            >
          </div>
        </aside>
      </section>
    </div>

    <script type="module" src="/src/app/main.ts"></script>
  </body>
</html>